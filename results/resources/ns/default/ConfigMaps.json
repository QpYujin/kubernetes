[{"metadata":{"name":"kube-consul-register","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/kube-consul-register","uid":"d0385a5c-7dde-11e7-bf00-0ea50f7b4c40","resourceVersion":"1067","creationTimestamp":"2017-08-10T15:15:58Z"},"data":{"consul_address":"my-consul-consul","consul_ca_file":"","consul_cert_file":"","consul_container_name":"consul","consul_insecure_skip_verify":"false","consul_key_file":"","consul_node_selector":"consul=enabled","consul_port":"8500","consul_scheme":"http","consul_timeout":"2s","consul_token":"","k8s_tag":"kubernetes","pod_label_selector":"","register_mode":"single","register_source":"pod"}},{"metadata":{"name":"my-consul-consul-tests","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/my-consul-consul-tests","uid":"ce152509-7dde-11e7-bf00-0ea50f7b4c40","resourceVersion":"1036","creationTimestamp":"2017-08-10T15:15:55Z"},"data":{"run.sh":"@test \"Testing Consul cluster has quorum\" {\n  for i in {0..2}; do\n    if [ `kubectl exec my-consul-consul-$i consul members --namespace=default | grep server | wc -l` -ge \"3\" ]; then\n      echo \"my-consul-consul-$i OK. consul members returning at least 3 records.\"\n    else\n      echo \"my-consul-consul-$i ERROR. consul members returning less than 3 records.\"\n      exit 1\n    fi\n  done\n}"}}]